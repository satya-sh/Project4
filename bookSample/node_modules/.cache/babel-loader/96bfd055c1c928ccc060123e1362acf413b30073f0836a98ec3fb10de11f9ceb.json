{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import'./BookList.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function BooksComponent(){const[books,setBooks]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[title,setTitle]=useState('');const[author,setAuthor]=useState('');const[id,setId]=useState('');const[year,setYear]=useState('');const[searchAuthor,setSearchAuthor]=useState('');// Function to handle the author search form submission\nconst handleAuthorSearch=async event=>{event.preventDefault();try{const response=await axios.get(\"https://nth-guide-404519.uw.r.appspot.com/findBooksByAuthor?author=\".concat(searchAuthor));setBooks(response.data);setLoading(false);}catch(error){setError(error.message);setLoading(false);}};// Function to call API to get all books in DB\nconst displayAllBooks=async()=>{try{const response=await axios.get('https://nth-guide-404519.uw.r.appspot.com/findAllBooks');setBooks(response.data);setLoading(false);}catch(error){setError(error.message);setLoading(false);}};// Function to handle the user submit of a new book\nconst handleSubmit=async event=>{event.preventDefault();const postData={title,author,year:parseInt(year,10)// Convert string to integer\n};try{const response=await axios.post('https://nth-guide-404519.uw.r.appspot.com/saveBook',postData);console.log('Response:',response.data);// After posting a new book, refresh the list of all books\ndisplayAllBooks();}catch(error){console.error('Error posting data:',error);}};// useEffect makes it so the list of books is shown when this component mounts\nuseEffect(()=>{// Using Axios to fetch data\ndisplayAllBooks();},[]);if(loading)return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});if(error)return/*#__PURE__*/_jsxs(\"div\",{children:[\"Error: \",error]});// This component displays a list of books and has forms for posting a new book and searching by author\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"book-list\",children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleAuthorSearch,children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Search by Author:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:searchAuthor,onChange:e=>setSearchAuthor(e.target.value)})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Search\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Title:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:title,onChange:e=>setTitle(e.target.value)})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Author:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:author,onChange:e=>setAuthor(e.target.value)})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Year:\",/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:year,onChange:e=>setYear(e.target.value)})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Submit\"})]}),books.map((book,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"book-item\",children:[/*#__PURE__*/_jsx(\"h3\",{children:book.title}),/*#__PURE__*/_jsxs(\"p\",{children:[\"by \",book.author]})]},index))]});}export default BooksComponent;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","BooksComponent","books","setBooks","loading","setLoading","error","setError","title","setTitle","author","setAuthor","id","setId","year","setYear","searchAuthor","setSearchAuthor","handleAuthorSearch","event","preventDefault","response","get","concat","data","message","displayAllBooks","handleSubmit","postData","parseInt","post","console","log","children","className","onSubmit","type","value","onChange","e","target","map","book","index"],"sources":["/Users/satya/Desktop/spring lab/book-sample/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport './BookList.css';\n\nfunction BooksComponent() {\n  const [books, setBooks] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  const [title, setTitle] = useState('');\n  const [author, setAuthor] = useState('');\n  const [id, setId] = useState('');\n  const [year, setYear] = useState('');\n  const [searchAuthor, setSearchAuthor] = useState('');\n\n  // Function to handle the author search form submission\n  const handleAuthorSearch = async (event) => {\n    event.preventDefault();\n\n    try {\n      const response = await axios.get(`https://nth-guide-404519.uw.r.appspot.com/findBooksByAuthor?author=${searchAuthor}`);\n      setBooks(response.data);\n      setLoading(false);\n    } catch (error) {\n      setError(error.message);\n      setLoading(false);\n    }\n  };\n\n  // Function to call API to get all books in DB\n  const displayAllBooks = async () => {\n    try {\n      const response = await axios.get('https://nth-guide-404519.uw.r.appspot.com/findAllBooks');\n      setBooks(response.data);\n      setLoading(false);\n    } catch (error) {\n      setError(error.message);\n      setLoading(false);\n    }\n  };\n\n  // Function to handle the user submit of a new book\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n\n    const postData = {\n      title,\n      author,\n      year: parseInt(year, 10), // Convert string to integer\n    };\n\n    try {\n      const response = await axios.post('https://nth-guide-404519.uw.r.appspot.com/saveBook', postData);\n      console.log('Response:', response.data);\n      // After posting a new book, refresh the list of all books\n      displayAllBooks();\n    } catch (error) {\n      console.error('Error posting data:', error);\n    }\n  };\n\n  // useEffect makes it so the list of books is shown when this component mounts\n  useEffect(() => {\n    // Using Axios to fetch data\n    displayAllBooks();\n  }, []);\n\n  if (loading) return <div>Loading...</div>;\n  if (error) return <div>Error: {error}</div>;\n\n  // This component displays a list of books and has forms for posting a new book and searching by author\n  return (\n    <div className=\"book-list\">\n      {/* Form for searching by author */}\n      <form onSubmit={handleAuthorSearch}>\n        <label>\n          Search by Author:\n          <input\n            type=\"text\"\n            value={searchAuthor}\n            onChange={(e) => setSearchAuthor(e.target.value)}\n          />\n        </label>\n        <button type=\"submit\">Search</button>\n      </form>\n\n      {/* Form for posting a new book */}\n      <form onSubmit={handleSubmit}>\n        <label>\n          Title:\n          <input type=\"text\" value={title} onChange={(e) => setTitle(e.target.value)} />\n        </label>\n        <br />\n        <label>\n          Author:\n          <input type=\"text\" value={author} onChange={(e) => setAuthor(e.target.value)} />\n        </label>\n        <br />\n\n        <label>\n          Year:\n          <input type=\"number\" value={year} onChange={(e) => setYear(e.target.value)} />\n        </label>\n        <br />\n        <button type=\"submit\">Submit</button>\n      </form>\n\n      {/* Display list of books */}\n      {books.map((book, index) => (\n        <div key={index} className=\"book-item\">\n          <h3>{book.title}</h3>\n          <p>by {book.author}</p>\n        </div>\n      ))}\n    </div>\n  );\n}\n\nexport default BooksComponent;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}